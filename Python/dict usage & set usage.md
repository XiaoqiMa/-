## Dict Usage & Set Usage

当字典 `d[k]` 不能找到正确的键的时候，Python 会抛出异常，这个行为符合 Python 所信奉 的“快速失败”哲学。也许每个 Python 程序员都知道可以用 d.get(k, default) 来代替 `d[k]`，给找不到的键一个默认的返回值（这比处理 KeyError 要方便不少）。但是要更 新某个键对应的值的时候，不管使用 `__getitem__` 还是 get 都会不自然，而且效率低。 就像示例 3-2 中的还没有经过优化的代码所显示的那样，dict.get 并不是处理找不到的 键的最好方法。

```python
# 获取单词的出现情况列表，如果单词不存在，把单词和一个空列表放进映射，然后返 回这个空列表，这样就能在不进行第二次查找的情况下更新列表了
my_dict.setdefault(key, []).append(new_value)

# 跟这样写：
if key not in my_dict:

  my_dict[key] = [] my_dict[key].append(new_value)

# 二者的效果是一样的，只不过后者至少要进行两次键查询——如果键不存在的话，就是三 次，用 setdefault 只需要一次就可以完成整个操作

```



一般来讲用户自定义的类型的对象都是可散列的，散列值就是它们的 id() 函数的返 回值，所以所有这些对象在比较的时候都是不相等的

OrderedDict.popitem() 会移除字典里最先插入的元素（先进先出）；同时这个方法还有一个可选的 last 参数，若 为真，则会移除最后插入的元素（后进先出）。

不要忘了，如果要创建一个空集，你必须用不带任何参数的构造方法 set()。如果只 是写成 `{}` 的形式，跟以前一样，你创建的其实是个空字典。